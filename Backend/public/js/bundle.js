!function(e){var r={};function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var a in e)t.d(n,a,function(r){return e[r]}.bind(null,a));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=4)}([function(e,r,t){},function(e,r,t){},function(e,r,t){},function(e,r,t){e.exports=t.p+"img/logoApp.png"},function(e,r,t){"use strict";t.r(r);t(0),t(1),t(2),t(3);var n=class{constructor(){this.URI="https://127.0.0.1:8080/api/libros"}async tomarlibro(){let e=await fetch(this.URI);return e=await e.json(),e}async guardarLibro(e){let r=await fetch(this.URI,{method:"POST",body:e});return r=await r.json(),r}async BorrarLibro(e){let r=await fetch(`${this.URI}/${e}`,{headers:{"Content-Type":"application/json"},method:"DELETE"});return r=await r.json(),r}},a=["second","minute","hour","day","week","month","year"],o=["秒","分钟","小时","天","周","个月","年"],i={},s=function(e,r){i[e]=r},d=function(e){return i[e]||i.en_US},c=[60,60,24,7,365/7/12,12];function l(e){return e instanceof Date?e:!isNaN(e)||/^\d+$/.test(e)?new Date(parseInt(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(e))}function u(e,r){for(var t=e<0?1:0,n=e=Math.abs(e),a=0;e>=c[a]&&a<c.length;a++)e/=c[a];return(e=Math.floor(e))>(0===(a*=2)?9:1)&&(a+=1),r(e,a,n)[t].replace("%s",e.toString())}function m(e,r){return(+(r?l(r):new Date)-+l(e))/1e3}var g=function(e,r,t){return u(m(e,t&&t.relativeDate),d(r))};s("en_US",(function(e,r){if(0===r)return["just now","right now"];var t=a[Math.floor(r/2)];return e>1&&(t+="s"),[e+" "+t+" ago","in "+e+" "+t]})),s("zh_CN",(function(e,r){if(0===r)return["刚刚","片刻后"];var t=o[~~(r/2)];return[e+" "+t+"前",e+" "+t+"后"]}));const v=new class{constructor(){this.enviador=new n,this.mostrarLibrocontainer=document.getElementById("Mostrar-Libro")}async RenderizarLibros(){const e=await this.enviador.tomarlibro().then(e=>(console.log(e),"ok"==e.status&&1==e.estatusNum?e.datoEnviados:[])).catch(e=>{console.log("Error, probablemente servidor caido, o error en al metodo del then",e),this.LanzarMensage("Error, probablemente servidor caido, o error en al metodo del then","danger",6e3)});console.log(e),this.mostrarLibrocontainer.innerHTML="",e.forEach(e=>{const r=document.createElement("div");r.className="DivRecividor",r.innerHTML=` \n        <div class="card m-2 ">\n            <div class="row">\n               <div class="col-md-4">\n                  <img src="${e.image}" class="img-fluid" />\n               </div> \n             <div class="col-md-8">\n                <div class="card-block p-3">\n                  <h3>Titulo:</h3>\n                  <h4 class="card-title">${e.titulo}</h4>\n                  <div class="row">\n                     <div class="col-md-6">\n                        <h3>Autor:</h3>\n                        <p class="card-text">${e.autor}</p>\n                      </div>\n                     <div class="col-md-6">\n                        <h3>Codigo:</h3>\n                        <p class="card-text">${e.isbn}</p>\n                     </div>\n                  </div>\n                  <a href="#" class="btn btn-danger delete mt-3" _id="${e._id}">Borrar</a>\n                </div> \n            </div>\n            </div>\n            <div class="card-footer">\n               ${g(e.dato_creado)}\n            </div> \n        </div>`,this.mostrarLibrocontainer.appendChild(r)})}async AgregarLibro(e){await this.enviador.guardarLibro(e).then(e=>{console.log(e),"ok"==e.status&&1==e.estatusNum?(this.LimpiarFormulario(),this.agregarUltimoLibro(e.datoEnviados),this.LanzarMensage("Se agrego un nuevo libro","success",6e3)):2==e.statusNum&&"error guardado"==e.status?this.LanzarMensage("Error en el servidor, la consulta no se realizo adecuadamente","danger",6e3):3==e.estatusNum&&"Imagen muy pesada"==e.status?this.LanzarMensage("La imagen que intenta guardar es muy pesada, intente con una mas pequeña","danger",6e3):3==e.estatusNum&&"algun otro error con multer"==e.status?this.LanzarMensage("Fallo el guardado de la imagen en el servidor","danger",6e3):this.LanzarMensage("Error desconocido no se pudo guardar","danger",6e3)}).catch(e=>{this.LanzarMensage("Error, probablemente servidor caido, o error en al metodo del then","danger",6e3),console.log("Error, probablemente servidor caido, o error en al metodo del then",e)})}async BorrarLibro(e){e.className+=" disabled",await this.enviador.BorrarLibro(e.getAttribute("_id")).then(r=>{console.log(r),"ok"==r.status&&1==r.estatusNum?(this.borrarUltimoLibro(e),this.LanzarMensage("Se borro satisfactoriamente","success",6e3)):2==r.statusNum&&"error dorrado"==r.status?this.LanzarMensage("Error en el servidor, el borrado no se realizo adecuadamente","danger",6e3):this.LanzarMensage("Error desconocido no se pudo borrar","danger",6e3)}).catch(e=>{this.LanzarMensage("Error, probablemente servidor caido, o error en al metodo del then","danger",6e3),console.log("Error, probablemente servidor caido, o error en al metodo del then",e)})}agregarUltimoLibro(e){const r=document.createElement("div");r.className="fadeInRight animated",r.innerHTML=` \n    <div class="card m-2 ">\n    <div class="row">\n       <div class="col-md-4">\n          <img src="${e.image}" class="img-fluid" />\n       </div> \n     <div class="col-md-8">\n        <div class="card-block p-3">\n          <h3>Titulo:</h3>\n          <h4 class="card-title">${e.titulo}</h4>\n          <div class="row">\n             <div class="col-md-6">\n                <h3>Autor:</h3>\n                <p class="card-text">${e.autor}</p>\n              </div>\n             <div class="col-md-6">\n                <h3>Codigo:</h3>\n                <p class="card-text">${e.isbn}</p>\n             </div>\n          </div>\n          <a href="#" class="btn btn-danger delete mt-3" _id="${e._id}">Borrar</a>\n        </div> \n    </div>\n    </div>\n      <div class="card-footer">\n         ${g(e.dato_creado)}\n      </div> \n    </div>`,this.mostrarLibrocontainer.insertBefore(r,this.mostrarLibrocontainer.firstElementChild);r.getElementsByClassName("delete")[0].addEventListener("click",e=>{e.preventDefault(),this.BorrarLibro(e.target)})}async borrarUltimoLibro(e){const r=e.parentNode.parentNode.parentNode.parentNode.parentNode;return r.className+=" flipOutY animated",setTimeout(()=>{this.mostrarLibrocontainer.removeChild(r)},1e3),await r}LimpiarFormulario(){document.getElementById("formulario-libros").reset()}LanzarMensage(e,r,t){const n=document.createElement("div");n.className=`alert alert-${r} bounceIn animated`,n.appendChild(document.createTextNode(e));const a=document.querySelector(".contenedor-mensaje"),o=document.querySelector("#formulario-libros");a.insertBefore(n,o),setTimeout(()=>{n.classList.remove("bounceIn"),n.className+="  bounceOut",setTimeout(()=>{a.removeChild(n)},700)},t)}};document.addEventListener("DOMContentLoaded",async()=>{await v.RenderizarLibros();const e=document.getElementById("Mostrar-Libro").getElementsByClassName("delete");for(let r=0;r<e.length;r++)e[r].addEventListener("click",(function(e){e.preventDefault(),v.BorrarLibro(e.target)}))}),document.getElementById("formulario-libros").addEventListener("submit",e=>{!function(e,r){e.preventDefault();const t=document.getElementById("titulo"),n=document.getElementById("autor"),a=document.getElementById("isbn"),o=document.getElementById("image");let i={titulo:t.value,autor:n.value,isbn:a.value,image:o.files};const s=new FormData;s.append("image",i.image[0]),s.append("titulo",i.titulo),s.append("autor",i.autor),s.append("isbn",i.isbn),r.AgregarLibro(s)}(e,v)})}]);
//# sourceMappingURL=bundle.js.map