!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=10)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLocale=t.register=void 0;var n="second_minute_hour_day_week_month_year".split("_"),a="秒_分钟_小时_天_周_个月_年".split("_"),o=function(e,t){if(0===t)return["just now","right now"];var r=n[parseInt(t/2)];return e>1&&(r+="s"),["".concat(e," ").concat(r," ago"),"in ".concat(e," ").concat(r)]},i={en_US:o,zh_CN:function(e,t){if(0===t)return["刚刚","片刻后"];var r=a[parseInt(t/2)];return["".concat(e," ").concat(r,"前"),"".concat(e," ").concat(r,"后")]}};t.register=function(e,t){i[e]=t};t.getLocale=function(e){return i[e]||o}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"format",{enumerable:!0,get:function(){return n.format}}),Object.defineProperty(t,"render",{enumerable:!0,get:function(){return a.render}}),Object.defineProperty(t,"cancel",{enumerable:!0,get:function(){return a.cancel}}),Object.defineProperty(t,"register",{enumerable:!0,get:function(){return o.register}}),t.version=void 0;var n=r(7),a=r(8),o=r(0);t.version="4.0.0-beta.2"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nextInterval=t.diffSec=t.formatDiff=t.toDate=t.toInt=void 0;var n=[60,60,24,7,365/7/12,12],a=function(e){return parseInt(e)};t.toInt=a;var o=function(e){return e instanceof Date?e:!isNaN(e)||/^\d+$/.test(e)?new Date(a(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(e))};t.toDate=o;t.formatDiff=function(e,t){for(var r=0,o=e<0?1:0,i=e=Math.abs(e);e>=n[r]&&r<n.length;r++)e/=n[r];return(e=a(e))>(0==(r*=2)?9:1)&&(r+=1),t(e,r,i)[o].replace("%s",e)};t.diffSec=function(e,t){return((t=t?o(t):new Date)-o(e))/1e3};t.nextInterval=function(e){for(var t=1,r=0,a=Math.abs(e);e>=n[r]&&r<n.length;r++)e/=n[r],t*=n[r];return a=(a%=t)?t-a:t,Math.ceil(a)}},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){e.exports=r.p+"img/logoApp.png"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.format=void 0;var n=r(2),a=r(0);t.format=function(e,t,r){var o=(0,n.diffSec)(e,r);return(0,n.formatDiff)(o,(0,a.getLocale)(t))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.render=t.cancel=void 0;var n=r(9),a=r(2),o=r(0),i={},s=function(e){clearTimeout(e),delete i[e]},d=function e(t,r,o,d){s((0,n.getTimerId)(t));var c=(0,a.diffSec)(r,d);t.innerHTML=(0,a.formatDiff)(c,o);var l=setTimeout(function(){e(t,r,o,d)},1e3*(0,a.nextInterval)(c),2147483647);i[l]=0,(0,n.saveTimerId)(t,l)};t.cancel=function(e){if(e)s((0,n.getTimerId)(e));else for(var t in i)s(t)};t.render=function(e,t,r){var a;void 0===e.length&&(e=[e]);for(var i=0;i<e.length;i++){a=e[i];var s=(0,n.getDateAttribute)(a),c=(0,o.getLocale)(t);d(a,s,c,r)}return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTimerId=t.saveTimerId=t.getDateAttribute=void 0;var n=function(e,t){return e.getAttribute?e.getAttribute(t):e.attr?e.attr(t):void 0};t.getDateAttribute=function(e){return n(e,"datetime")};t.saveTimerId=function(e,t){return e.setAttribute?e.setAttribute("timeago-tid",t):e.attr?e.attr("timeago-tid",t):void 0};t.getTimerId=function(e){return n(e,"timeago-tid")}},function(e,t,r){"use strict";r.r(t);r(3),r(4),r(5),r(6);var n=class{constructor(){this.URI="http://localhost:3000/api/libros"}async tomarlibro(){let e=await fetch(this.URI);return e=await e.json()}async guardarLibro(e){let t=await fetch(this.URI,{method:"POST",body:e});return t=await t.json()}async BorrarLibro(e){let t=await fetch(`${this.URI}/${e}`,{headers:{"Content-Type":"application/json"},method:"DELETE"});return t=await t.json()}},a=r(1);const o=new class{constructor(){this.enviador=new n,this.mostrarLibrocontainer=document.getElementById("Mostrar-Libro")}async RenderizarLibros(){const e=await this.enviador.tomarlibro().then(e=>(console.log(e),"ok"==e.status&&1==e.estatusNum?e.datoEnviados:[])).catch(e=>{console.log("Error, probablemente servidor caido, o error en al metodo del then",e),this.LanzarMensage("Error, probablemente servidor caido, o error en al metodo del then","danger",6e3)});console.log(e),this.mostrarLibrocontainer.innerHTML="",e.forEach(e=>{const t=document.createElement("div");t.className="DivRecividor",t.innerHTML=` \n        <div class="card m-2 ">\n            <div class="row">\n               <div class="col-md-4">\n                  <img src="${e.image}" class="img-fluid" />\n               </div> \n             <div class="col-md-8">\n                <div class="card-block p-3">\n                  <h3>Titulo:</h3>\n                  <h4 class="card-title">${e.titulo}</h4>\n                  <div class="row">\n                     <div class="col-md-6">\n                        <h3>Autor:</h3>\n                        <p class="card-text">${e.autor}</p>\n                      </div>\n                     <div class="col-md-6">\n                        <h3>Codigo:</h3>\n                        <p class="card-text">${e.isbn}</p>\n                     </div>\n                  </div>\n                  <a href="#" class="btn btn-danger delete mt-3" _id="${e._id}">Borrar</a>\n                </div> \n            </div>\n            </div>\n            <div class="card-footer">\n               ${Object(a.format)(e.dato_creado)}\n            </div> \n        </div>`,this.mostrarLibrocontainer.appendChild(t)})}async AgregarLibro(e){await this.enviador.guardarLibro(e).then(e=>{console.log(e),"ok"==e.status&&1==e.estatusNum?(this.LimpiarFormulario(),this.agregarUltimoLibro(e.datoEnviados),this.LanzarMensage("Se agrego un nuevo libro","success",6e3)):2==e.statusNum&&"error guardado"==e.status?this.LanzarMensage("Error en el servidor, la consulta no se realizo adecuadamente","danger",6e3):3==e.estatusNum&&"Imagen muy pesada"==e.status?this.LanzarMensage("La imagen que intenta guardar es muy pesada, intente con una mas pequeña","danger",6e3):3==e.estatusNum&&"algun otro error con multer"==e.status?this.LanzarMensage("Fallo el guardado de la imagen en el servidor","danger",6e3):this.LanzarMensage("Error desconocido no se pudo guardar","danger",6e3)}).catch(e=>{this.LanzarMensage("Error, probablemente servidor caido, o error en al metodo del then","danger",6e3),console.log("Error, probablemente servidor caido, o error en al metodo del then",e)})}async BorrarLibro(e){e.className+=" disabled",await this.enviador.BorrarLibro(e.getAttribute("_id")).then(t=>{console.log(t),"ok"==t.status&&1==t.estatusNum?(this.borrarUltimoLibro(e),this.LanzarMensage("Se borro satisfactoriamente","success",6e3)):2==t.statusNum&&"error dorrado"==t.status?this.LanzarMensage("Error en el servidor, el borrado no se realizo adecuadamente","danger",6e3):this.LanzarMensage("Error desconocido no se pudo borrar","danger",6e3)}).catch(e=>{this.LanzarMensage("Error, probablemente servidor caido, o error en al metodo del then","danger",6e3),console.log("Error, probablemente servidor caido, o error en al metodo del then",e)})}agregarUltimoLibro(e){const t=document.createElement("div");t.className="fadeInRight animated",t.innerHTML=` \n    <div class="card m-2 ">\n    <div class="row">\n       <div class="col-md-4">\n          <img src="${e.image}" class="img-fluid" />\n       </div> \n     <div class="col-md-8">\n        <div class="card-block p-3">\n          <h3>Titulo:</h3>\n          <h4 class="card-title">${e.titulo}</h4>\n          <div class="row">\n             <div class="col-md-6">\n                <h3>Autor:</h3>\n                <p class="card-text">${e.autor}</p>\n              </div>\n             <div class="col-md-6">\n                <h3>Codigo:</h3>\n                <p class="card-text">${e.isbn}</p>\n             </div>\n          </div>\n          <a href="#" class="btn btn-danger delete mt-3" _id="${e._id}">Borrar</a>\n        </div> \n    </div>\n    </div>\n      <div class="card-footer">\n         ${Object(a.format)(e.dato_creado)}\n      </div> \n    </div>`,this.mostrarLibrocontainer.insertBefore(t,this.mostrarLibrocontainer.firstElementChild),t.getElementsByClassName("delete")[0].addEventListener("click",e=>{e.preventDefault(),this.BorrarLibro(e.target)})}async borrarUltimoLibro(e){const t=e.parentNode.parentNode.parentNode.parentNode.parentNode;return t.className+=" flipOutY animated",setTimeout(()=>{this.mostrarLibrocontainer.removeChild(t)},1e3),await t}LimpiarFormulario(){document.getElementById("formulario-libros").reset()}LanzarMensage(e,t,r){const n=document.createElement("div");n.className=`alert alert-${t} bounceIn animated`,n.appendChild(document.createTextNode(e));const a=document.querySelector(".contenedor-mensaje"),o=document.querySelector("#formulario-libros");a.insertBefore(n,o),setTimeout(()=>{n.classList.remove("bounceIn"),n.className+="  bounceOut",setTimeout(()=>{a.removeChild(n)},700)},r)}};document.addEventListener("DOMContentLoaded",async()=>{await o.RenderizarLibros();const e=document.getElementById("Mostrar-Libro").getElementsByClassName("delete");for(let t=0;t<e.length;t++)e[t].addEventListener("click",function(e){e.preventDefault(),o.BorrarLibro(e.target)})}),document.getElementById("formulario-libros").addEventListener("submit",e=>{!function(e,t){e.preventDefault();const r=document.getElementById("titulo"),n=document.getElementById("autor"),a=document.getElementById("isbn"),o=document.getElementById("image");let i={titulo:r.value,autor:n.value,isbn:a.value,image:o.files};const s=new FormData;s.append("image",i.image[0]),s.append("titulo",i.titulo),s.append("autor",i.autor),s.append("isbn",i.isbn),t.AgregarLibro(s)}(e,o)})}]);
//# sourceMappingURL=bundle.js.map